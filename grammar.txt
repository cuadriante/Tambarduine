program             : block

block               : main

main                : PRINCIPAL LPAREN RPAREN LBRACE line RBRACE SEMICOLON

line                : expr
                    | boolean_neg
                    | boolean_to_true
                    | boolean_to_false
                    | statements



boolean_neg         : SET VAR NEG SEMICOLON

boolean_to_true     : SET VAR TRUE SEMICOLON

boolean_to_false    : SET VAR FALSE SEMICOLON

expr                : 
                    | arith-expr
                    | BOOL
                    | condition


statements          : statement
                    | statements statement

statement           : if_statement
                    | for_loop
                    | en_caso
                    | var_decls 
                    | callable_function

var_decls           : var_decls var_decl
                    | var_decl

var_decl            : SET VAR ASSIGN expr SEMICOLON


if_statement        : IF condition LBRACE expression RBRACE
                    | IF condition LBRACE expression RBRACE ELSE LBRACE expression RBRACE



for_loop            : FOR VAR TO factor STEP NUMBER LBRACE expression RBRACE      



en_caso             : ENCASO switch_list_0 SINO LBRACE expression RBRACE FINENCASO SEMICOLON
                    | ENCASO expression switch_list_1 SINO LBRACE expression RBRACE FINENCASO SEMICOLON
                
switch_list_0       : CUANDO VAR condition expression ENTONS LBRACE expression RBRACE
                    | switch_list_0 CUANDO VAR condition expression ENTONS LBRACE expression RBRACE

switch_list_1       : CUANDO condition expression ENTONS LBRACE expression RBRACE
                    | switch_list_1 CUANDO condition expression ENTONS LBRACE expression RBRACE




condition           : arith-expression semi_condition
                    | NEGATIVE condition

semi_condition      : (EQUALS|DIFFERENT|LESSTHAN|MORETHAN|LESSTHANE|MORETHANE) arith-expression


arith-expr          : arith-expression (PLUS|MINUS) term
                    | term

term                : term (TIMES|DIVIDE|WHOLEDIVIDE|MODULE|POWER) factor
                    | factor

factor              : NUMBER
                    | VAR
                    | LPAREN factor RPAREN

params              : param
                    | params param

param               : NUMBER
                    | VAR
                    | STRING

callable_function   : abanico
                    | vertical
                    | percutor
                    | golpe
                    | vibrato
                    | metronomo
                    | print                   

abanico             : ABANICO LPAREN params RPAREN SEMICOLON
vertical            : VERTICAL LPAREN params RPAREN SEMICOLON
percutor            : PERCUTOR LPAREN params RPAREN SEMICOLON
golpe               : GOLPE LPAREN params RPAREN SEMICOLON
vibrato             : VIBRATO LPAREN params RPAREN SEMICOLON
metronomo           : METRONOMO LPAREN params RPAREN SEMICOLON
print               : PRINT LPAREN params RPAREN SEMICOLON